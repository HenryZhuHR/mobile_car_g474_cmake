

# 串口数据设计

统一帧结构 

| 数据位    | 数据说明     |
| :-------- | ------------ |
| 0         | 帧头1 `0xAA` |
| 1         | 帧头2 `0x55` |
| 2         | 数据类型标记 |
| 3 - (n-3) | 数据         |
| (n-2)     | 校验和       |
| (n-1)     | 帧尾 `0xFF`  |

> 数据类型标记 0x11~0x7F 为运动（行为）控制数据，0x81~0xEF 为传感器数据，其他类型为不合法数据

## 控制数据格式


| 数据位 | 数据说明            |
| :----- | ------------------- |
| 0      | 帧头1 `0xAA`        |
| 1      | 帧头2 `0x55`        |
| 2      | 速度控制标记 `0x11` |
| 3      | 保留                |
| 4      | x 运动速度          |
| 5      | y 运动速度          |
| 6      | z 运动速度          |
| 7      | z 运动速度          |
| 8      | z 运动速度          |
| 9      | z 运动速度          |
| 10     | 保留                |
| 11     | 保留                |
| 12     | 保留                |
| 13     | 保留                |
| 14     | 保留                |
| 15     | 保留                |
| 16     | 校验和              |
| 17     | 帧尾 `0xFF`         |
- x,y 速度  int8 类型 -128～127 刚好就是 1.3
- z 速度 float 类型 不然精度不够
- 不可以发送太长，否则接收不到

AA 55 00 00 0A 00 00 00 00 00 00 00 00 00 00 00 0A FF
## 传感器数据格式


### IMU 数据格式

| 数据位  | 数据说明                |
| :------ | ----------------------- |
| 0       | 帧头1 `0xAA`            |
| 1       | 帧头2 `0x55`            |
| 2       | IMU数据标记 `0x81`      |
| 3 - 6   | IMU 数据序号 `uint32`   |
| 7 - 8   | 陀螺仪数据 x `uint16`   |
| 9 - 10  | 陀螺仪数据 y `uint16`   |
| 11 - 12 | 陀螺仪数据 z `uint16`   |
| 13 - 14 | 加速度计数据 x `uint16` |
| 15 - 16 | 加速度计数据 y `uint16` |
| 17 - 18 | 加速度计数据 z `uint16` |
| 19      | 校验和                  |
| 20      | 帧尾 `0xFF`             |


### 里程计数据格式

odometer

| 数据位  | 数据说明              |
| :------ | --------------------- |
| 0       | 帧头1 `0xAA`          |
| 1       | 帧头2 `0x55`          |
| 2       | 里程计数据标记 `0x82` |
| 3 - 6   | x 方向里程            |
| 7 - 10  | y 方向里程            |
| 11 - 14 | z 方向里程            |
| 15 - 18 | 姿态 theta            |
| 19      | 校验和                |
| 20      | 帧尾 `0xFF`           |

